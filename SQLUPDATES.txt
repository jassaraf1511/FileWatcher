USE [CorporateActions]
GO
/****** Object:  StoredProcedure [dbo].[sp_insert_Announcement_EventOption]    Script Date: 11/25/2024 11:44:15 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO



ALTER PROC [dbo].[sp_insert_Announcement_EventOption]
(
	--@Announcement_EventOptionID as int,
	@TransactionId as varchar(32),
	@CorporateActionReference as varchar(16) = Null,
	@CAOptionNumber as numeric = Null,
	@CAOptionCode as varchar(4) = Null,
	@OptionFeatures as varchar(4) = Null,
	@DispositionofFractions as varchar(4) = Null,
	@OfferType as varchar(4) = Null,
	@CountryofNONDomicile as varchar(2) = Null,
	@CurrencyOption as varchar(4) = Null,
	@DefaultProcessingFlag as varchar(1) = Null,
	@ExpirationDate as datetime = Null,
	@LastTradingDate_Time as datetime = Null,
	@MarketDeadlineDate as datetime = Null,
	@ResponseDeadlineDate as datetime = Null,
	@EndofSecuritiesBlockingPeriod as datetime = Null,
	@PeriodofActionStartDate as datetime = Null,
	@PeriodofActionEndDate as datetime = Null,
	@PriceCalculationPeriodStartDate as datetime = Null,
	@PriceCalculationPeriodEndDate as datetime = Null,
	@GrossDividendTypeCode as varchar(4) = Null,
	@GrossDividendStatusCode as varchar(4) = Null,
	@GrossDividendRateCurrency as varchar(3) = Null,
	@GrossDividendRate as numeric(31, 15) = Null,
	@WithHoldingTaxFlag as varchar(3) = Null,
	@CalculatedInterestRateTypeCode as varchar(8) = Null,
	@CalculatedInterestStatusCode as varchar(4) = Null,
	@CalculatedInterestRateCurrency as varchar(3) = Null,
	@CalculatedInterestRate as numeric(31, 15) = Null,
	@WithholdingTaxRateTypeCode as varchar(4) = Null,
	@WithholdingTaxRateStatusCode as varchar(8) = Null,
	@WithholdingRateCurrency as varchar(3) = Null,
	@WithholdingTaxRate as numeric(31, 15) = Null,
	@CashInLieuPriceType as varchar(8) = Null,
	@CashInLieuAmountTypeCode as varchar(8) = Null,
	@CashInLieuofSharesPriceCurrency as varchar(3) = Null,
	@CashInLieuofSharesPriceValue as numeric(31, 15) = Null,
	@MaximumPriceType as varchar(8) = Null,
	@MaximumPriceAmountTypeCode as varchar(8) = Null,
	@MaximumPriceCurrency as varchar(3) = Null,
	@MaximumPriceAmount as numeric(31, 15) = Null,
	@MinimumPriceType as varchar(8) = Null,
	@MinimumPriceAmountTypeCode as varchar(8) = Null,
	@MinimumPriceCurrency as varchar(3) = Null,
	@MinimumPriceAmount as numeric(31, 15) = Null,
	@MinimumInstructQtyType as varchar(4) = Null,
	@MinimumInstructQtyCode as varchar(8) = Null,
	@MinimumInstructQty as numeric(31, 15) = Null,
	@MinimumMultipleInstructQtyType as varchar(4) = Null,
	@MinimumMultipleInstructQtyCode as varchar(8) = Null,
	@MinimumMultipleInstructQty as numeric(31, 15) = Null,
	@CreationDate as datetime = Null,
	@ReceiptDate as datetime = Null,
	@ModificatioinDate as datetime = Null,
	@CancelationDate as datetime = Null,
	@CreatedBy as varchar(35) = Null,
	@ModifiedBy as varchar(35) = Null,
	@CancelledBy as varchar(35) = Null

)
AS

begin transaction

	begin try

		-- insert
			insert [dbo].[Announcement_EventOption] (
			---	Announcement_EventOptionID,
				TransactionId,
				CorporateActionReference,
				CAOptionNumber,
				CAOptionCode,
				OptionFeatures,
				DispositionofFractions,
				OfferType,
				CountryofNONDomicile,
				CurrencyOption,
				DefaultProcessingFlag,
				ExpirationDate,
				LastTradingDate_Time,
				MarketDeadlineDate,
				ResponseDeadlineDate,
				EndofSecuritiesBlockingPeriod,
				PeriodofActionStartDate,
				PeriodofActionEndDate,
				PriceCalculationPeriodStartDate,
				PriceCalculationPeriodEndDate,
				GrossDividendTypeCode,
				GrossDividendStatusCode,
				GrossDividendRateCurrency,
				GrossDividendRate,
				WithHoldingTaxFlag,
				CalculatedInterestRateTypeCode,
				CalculatedInterestStatusCode,
				CalculatedInterestRateCurrency,
				CalculatedInterestRate,
				WithholdingTaxRateTypeCode,
				WithholdingTaxRateStatusCode,
				WithholdingRateCurrency,
				WithholdingTaxRate,
				CashInLieuPriceType,
				CashInLieuAmountTypeCode,
				CashInLieuofSharesPriceCurrency,
				CashInLieuofSharesPriceValue,
				MaximumPriceType,
				MaximumPriceAmountTypeCode,
				MaximumPriceCurrency,
				MaximumPriceAmount,
				MinimumPriceType,
				MinimumPriceAmountTypeCode,
				MinimumPriceCurrency,
				MinimumPriceAmount,
				MinimumInstructQtyType,
				MinimumInstructQtyCode,
				MinimumInstructQty,
				MinimumMultipleInstructQtyType,
				MinimumMultipleInstructQtyCode,
				MinimumMultipleInstructQty,
				CreationDate,
				ReceiptDate,
				ModificatioinDate,
				CancelationDate,
				CreatedBy,
				ModifiedBy,
				CancelledBy)
			values (
			--	@Announcement_EventOptionID,
				@TransactionId,
				@CorporateActionReference,
				@CAOptionNumber,
				@CAOptionCode,
				@OptionFeatures,
				@DispositionofFractions,
				@OfferType,
				@CountryofNONDomicile,
				@CurrencyOption,
				@DefaultProcessingFlag,
				@ExpirationDate,
				@LastTradingDate_Time,
				@MarketDeadlineDate,
				@ResponseDeadlineDate,
				@EndofSecuritiesBlockingPeriod,
				@PeriodofActionStartDate,
				@PeriodofActionEndDate,
				@PriceCalculationPeriodStartDate,
				@PriceCalculationPeriodEndDate,
				@GrossDividendTypeCode,
				@GrossDividendStatusCode,
				@GrossDividendRateCurrency,
				@GrossDividendRate,
				@WithHoldingTaxFlag,
				@CalculatedInterestRateTypeCode,
				@CalculatedInterestStatusCode,
				@CalculatedInterestRateCurrency,
				@CalculatedInterestRate,
				@WithholdingTaxRateTypeCode,
				@WithholdingTaxRateStatusCode,
				@WithholdingRateCurrency,
				@WithholdingTaxRate,
				@CashInLieuPriceType,
				@CashInLieuAmountTypeCode,
				@CashInLieuofSharesPriceCurrency,
				@CashInLieuofSharesPriceValue,
				@MaximumPriceType,
				@MaximumPriceAmountTypeCode,
				@MaximumPriceCurrency,
				@MaximumPriceAmount,
				@MinimumPriceType,
				@MinimumPriceAmountTypeCode,
				@MinimumPriceCurrency,
				@MinimumPriceAmount,
				@MinimumInstructQtyType,
				@MinimumInstructQtyCode,
				@MinimumInstructQty,
				@MinimumMultipleInstructQtyType,
				@MinimumMultipleInstructQtyCode,
				@MinimumMultipleInstructQty,
				@CreationDate,
				@ReceiptDate,
				@ModificatioinDate,
				@CancelationDate,
				@CreatedBy,
				@ModifiedBy,
				@CancelledBy)


		-- Return the new ID
		select SCOPE_IDENTITY();

		commit transaction

	end try

	begin catch

		declare @ErrorMessage NVARCHAR(4000);
		declare @ErrorSeverity INT;
		declare @ErrorState INT;

		select @ErrorMessage = ERROR_MESSAGE(), @ErrorSeverity = ERROR_SEVERITY(), @ErrorState = ERROR_STATE();

		raiserror (@ErrorMessage, @ErrorSeverity, @ErrorState);

		rollback transaction

	end catch;


----------------------------

USE [CorporateActions]
GO

/****** Object:  Table [dbo].[Announcement_EventOption]    Script Date: 11/25/2024 11:45:46 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[Announcement_EventOption](
	[Announcement_EventOptionID] [int] IDENTITY(1,1) NOT NULL,
	[TransactionId] [varchar](32) NULL,
	[CorporateActionReference] [varchar](16) NULL,
	[CAOptionNumber] [numeric](3, 0) NULL,
	[CAOptionCode] [varchar](4) NULL,
	[OptionFeatures] [varchar](4) NULL,
	[DispositionofFractions] [varchar](4) NULL,
	[OfferType] [varchar](4) NULL,
	[CountryofNONDomicile] [varchar](2) NULL,
	[CurrencyOption] [varchar](4) NULL,
	[DefaultProcessingFlag] [varchar](1) NULL,
	[ExpirationDate] [datetime] NULL,
	[LastTradingDate_Time] [datetime] NULL,
	[MarketDeadlineDate] [datetime] NULL,
	[ResponseDeadlineDate] [datetime] NULL,
	[EndofSecuritiesBlockingPeriod] [datetime] NULL,
	[PeriodofActionStartDate] [datetime] NULL,
	[PeriodofActionEndDate] [datetime] NULL,
	[PriceCalculationPeriodStartDate] [datetime] NULL,
	[PriceCalculationPeriodEndDate] [datetime] NULL,
	[GrossDividendTypeCode] [varchar](4) NULL,
	[GrossDividendStatusCode] [varchar](4) NULL,
	[GrossDividendRateCurrency] [varchar](3) NULL,
	[GrossDividendRate] [numeric](31, 15) NULL,
	[WithHoldingTaxFlag] [varchar](3) NULL,
	[CalculatedInterestRateTypeCode] [varchar](8) NULL,
	[CalculatedInterestStatusCode] [varchar](4) NULL,
	[CalculatedInterestRateCurrency] [varchar](3) NULL,
	[CalculatedInterestRate] [numeric](31, 15) NULL,
	[WithholdingTaxRateTypeCode] [varchar](4) NULL,
	[WithholdingTaxRateStatusCode] [varchar](8) NULL,
	[WithholdingRateCurrency] [varchar](3) NULL,
	[WithholdingTaxRate] [numeric](31, 15) NULL,
	[CashInLieuPriceType] [varchar](8) NULL,
	[CashInLieuAmountTypeCode] [varchar](8) NULL,
	[CashInLieuofSharesPriceCurrency] [varchar](3) NULL,
	[CashInLieuofSharesPriceValue] [numeric](31, 15) NULL,
	[MaximumPriceType] [varchar](8) NULL,
	[MaximumPriceAmountTypeCode] [varchar](8) NULL,
	[MaximumPriceCurrency] [varchar](3) NULL,
	[MaximumPriceAmount] [numeric](31, 15) NULL,
	[MinimumPriceType] [varchar](8) NULL,
	[MinimumPriceAmountTypeCode] [varchar](8) NULL,
	[MinimumPriceCurrency] [varchar](3) NULL,
	[MinimumPriceAmount] [numeric](31, 15) NULL,
	[MinimumInstructQtyType] [varchar](4) NULL,
	[MinimumInstructQtyCode] [varchar](8) NULL,
	[MinimumInstructQty] [numeric](31, 15) NULL,
	[MinimumMultipleInstructQtyType] [varchar](4) NULL,
	[MinimumMultipleInstructQtyCode] [varchar](8) NULL,
	[MinimumMultipleInstructQty] [numeric](31, 15) NULL,
	[CreationDate] [datetime] NULL,
	[ReceiptDate] [datetime] NULL,
	[ModificatioinDate] [datetime] NULL,
	[CancelationDate] [datetime] NULL,
	[CreatedBy] [varchar](35) NULL,
	[ModifiedBy] [varchar](35) NULL,
	[CancelledBy] [varchar](35) NULL,
 CONSTRAINT [PK_AnnouncementEventOption] PRIMARY KEY CLUSTERED 
(
	[Announcement_EventOptionID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO






